<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.admin.admin_cs">
  
  <insert id="sendContent_m" parameterType="com.admin.admin_cs.model.M_a_csDTO">
  		insert into m_a_cs values(m_a_cs_maidx.nextval,#{midx},1,2,#{content},sysdate)
  </insert>
  
  <select id="m_a_cs_List" resultType="com.admin.admin_cs.model.M_a_csListDTO">
  		select m.midx midx, member.img img,member.name name,m_a_cs.content content,m_a_cs.time time from member,m_a_cs,(SELECT midx,max(maidx) maidx FROM m_a_cs group BY midx) m where member.midx=m.midx and m_a_cs.maidx=m.maidx order by time desc
  </select>
  
  <select id="m_a_cs_Select" parameterType="Integer" resultType="com.admin.admin_cs.model.M_a_csDTO">
  		select * from m_a_cs where midx=#{midx}
  </select>
  
  <insert id="sendContent_c" parameterType="com.admin.admin_cs.model.C_a_csDTO">
  		insert into c_a_cs values(c_a_cs_caidx.nextval,#{cidx},1,2,#{content},sysdate)
  </insert>
  
  <select id="c_a_cs_List" resultType="com.admin.admin_cs.model.C_a_csListDTO">
  		select c.cidx cidx, company.img img,company.cname cname,c_a_cs.content content,c_a_cs.time time from company,c_a_cs,(select cidx,max(caidx) caidx from c_a_cs group by cidx) c where company.cidx=c.cidx and c_a_cs.caidx=c.caidx order by time desc
  </select>
  
  <select id="c_a_cs_Select" parameterType="Integer" resultType="com.admin.admin_cs.model.C_a_csDTO">
  		select * from c_a_cs where cidx=#{cidx}
  </select>
  
  </mapper>