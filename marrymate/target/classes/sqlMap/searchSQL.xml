<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.marry.search">
	<select id="searchTest" resultType="Integer">
	 	select
	 		count(cidx)
	 	from
	 		company
		where
			cidx >= 1
		order by
			cidx desc
	</select>
	<select id="searchTest2" resultType="String">
	 	select
	 		cname
	 	from
	 		company
		order by
			cidx desc
	</select>
	<select id="searchAll" parameterType="com.marry.search.model.SearchDTO" resultType="com.marry.company.model.CompanyDTO">
	 	select
	 		*
	 	from
	 		company
 		where 1=1
 		<if test="name != null and name != ''">
 			and cname like '%' || #{name} || '%'
 		</if>
		<if test="sort == 1">
		order by
			cname asc, cidx desc
		</if>
		<if test="sort == 2">
		order by
			watch desc, cidx desc
		</if>
		<if test="sort == 3">
		order by
			pay asc, cidx desc
		</if>
		<if test="sort == 4">
		order by
			pay desc, cidx desc
		</if>
	</select>
</mapper>